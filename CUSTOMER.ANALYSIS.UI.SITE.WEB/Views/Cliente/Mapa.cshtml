@{
    ViewBag.Title = "Mapa";
    ViewBag.pTitle = "Mapa";
    ViewBag.pageTitle = "Clientes";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-3">
        <div class="card">
            <div class="card-body">
                <div class="accordion" id="accordionExample">
                    <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                        Opciones
                      </button>
                    </h2>
                    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
                      <div class="accordion-body">
                                <div class="col-md-12">
                                    <label for="chk-clientes-inactivos"><input type="checkbox" value="1" id="chk-clientes-inactivos" onclick="onChangeInactivos()"> Clientes Inactivos</label>
                                </div>
                                <div class="col-md-12">
                                    <label for="chk-clientes-antiguos"> <input type="checkbox" value="1" id="chk-clientes-antiguos" onclick="onChangeAntiguos()"> Clientes Antiguos</label>
                                </div>
                                <div class="col-md-12">
                                    <label for="chk-clientes-con-ventas"> <input type="checkbox" value="1" id="chk-clientes-con-ventas" onclick="onChangeMasVendidos()"> Clientes con más ventas</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                        Sectores
                      </button>
                    </h2>
                    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
                      <div class="accordion-body">
                              @foreach (CUSTOMER.ANALYSIS.APPLICATION.CORE.Entities.Sector item in ViewBag.sectores)
                               {
                                    <div class="col-md-12">
                                        <label for="chk-sector-@item.IdSector">
                                            <input type="checkbox" value="1" id="chk-sector-@item.IdSector" onclick="onChangeSector('@item.IdSector')"> @item.Nombre
                                        </label>
                                    </div>
                               }
                          </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-9">
        <div class="card">
            <div class="card-body">
                <div id="map" style="height: 700px">
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Inicio Google Maps -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=@CUSTOMER.ANALYSIS.UI.WEB.SITE.Parameters.WebSiteParameters.ApiKeyGoogle&callback=initMap&libraries=visualization&v=weekly" defer></script>
    <script src="~/js/heatmap.js?v=@CUSTOMER.ANALYSIS.UI.WEB.SITE.Parameters.WebSiteParameters.Version"></script>
    <!-- Fin Google Maps -->

    <script>
        urlClientes = '@Url.Action("Index", "Cliente")';
        $(document).ready(function(){
            getClientes();
            $("#floating-panel").draggable();
        })
    </script>
}

    @*https://www.geeksforgeeks.org/jquery-gmaps-plugin/*@